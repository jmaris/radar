<p id="notice"><%= notice %></p>

<p>
  <strong>Url:</strong>
  <a href="
  <%= "#{@machine.protocol}://#{@machine.host}:#{@machine.port}/sonar_api_v1" %>"><%= "#{@machine.protocol}://#{@machine.host}:#{@machine.port}/sonar_api_v1" %></a>
  <br>
  <strong>Alias:</strong>
  <%= @alias %>
  <br>
  <% if @status %>
  <strong>Hostname:</strong>
  <%= @hostname %>
  <br>
  <strong>Current CPU load: </strong>
  <%= @cpu_load %> %
  <br>
  <strong>Current RAM Load: </strong>
  <%= @ram_load %> %
  <br>
  <strong>Current storage load: </strong>
  <%= @storage_load %> %
  <br>
  <% else %>
  <strong>HOST IS CURRENTLY DOWN</strong>
  <br>
  <% end %>
  <strong>Update interval: </strong>
  <%= pluralize(@update_interval, 'minute') %>
  <br>
  <div id="cpu_chart" style="width:50%; height:400px;float:left;"></div>
  <div id="ram_chart" style="width:50%; height:400px;float:right;"></div>
  <div id="storage_chart" style="width:100%; height:200px;"></div>
  <script>
    $(function () {
      $('#cpu_chart').highcharts({
        chart :{
          type: 'area'
        },
        yAxis: {
          min: 0, max: 100,
          title: {
            text: 'CPU Percentage'
          },
          labels: {
            formatter: function() {
              return this.value + ' %';
            }
          },
        },
        legend: {
          enabled: false
        },
        xAxis: {
          labels: {
            enabled: false
          },
        },
        title:{
          text: 'Last 10 CPU metrics'
        },
        plotOptions: {
          series: {
            allowPointSelect: true
          }
        },
        series: [{
          data: <%= @cpu_load_last10 %>
        }]
      });
    });
  </script>

  <script>
    $(function () {
      $('#ram_chart').highcharts({
        chart :{
          type: 'area'
        },
        yAxis: {
          min: 0, max: 100,
          title: {
            text: 'RAM Percentage'
          },
          labels: {
            formatter: function() {
              return this.value + ' %';
            }
          },
        },
        legend: {
          enabled: false
        },
        xAxis: {
          labels: {
            enabled: false
          },
        },
        title:{
          text: 'Last 10 RAM metrics'
        },
        plotOptions: {
          area: {}
        },
        series: [{
          data: <%= @ram_load_last10 %>
        }]
      });
    });
  </script>

  <script>
    $(function () {
      $('#storage_chart').highcharts({
        chart :{
          type: 'area'
        },
        yAxis: {
          min: 0, max: 100,
          title: {
            text: 'Storage Percentage'
          },
          labels: {
            formatter: function() {
              return this.value + ' %';
            }
          },
        },
        legend: {
          enabled: false
        },
        xAxis: {
          labels: {
            enabled: false
          },
        },
        title:{
          text: 'Last 10 storage metrics'
        },
        plotOptions: {
          series: {
            allowPointSelect: true
          }
        },
        series: [{
          data: <%= @storage_load_last10 %>
        }]
      });
    });
  </script>

</p>

<%= link_to 'Edit', edit_machine_path(@machine) %> |
<%= link_to 'Back', machines_path %>
