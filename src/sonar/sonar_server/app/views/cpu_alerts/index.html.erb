<script>
  $(document).ready(function(){
    $('[data-toggle="popover"]').popover();
  });
</script>

<script>
  $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip({ container: 'body'});   
  });
</script>

<p id="notice"> <%= notice %> </p>

<div class="page-header">
  <h1>CPU alerts</h1>
</div>

<div class="table-responsive text-center">
  <table class="table table-striped">
   <thead>
    <tr>
      <th class="text-center">Machine ID</th>
      <th class="text-center">E-Mail address</th>
      <th class="text-center">CPU threshold</th>
      <th class="text-center">Check interval</th>
      <th class="text-center">Duration</th>
      <th class="text-center">Custom message</th>
      <th class="text-center">Operations</th>
    </tr>
  </thead>

  <tbody>
    <% @cpu_alerts.each do |cpu_alert| %>
      <% if cpu_alert.triggered %>
        <tr class="danger">
      <% else %>
        <tr>
      <% end %>
      <td> <%= cpu_alert.machine_id %> </td>
      <td> <%= cpu_alert.addressee %> </td>
      <td> <%= cpu_alert.threshold %> </td>
      <td> <%= cpu_alert.check_interval %> </td>
      <td> <%= cpu_alert.duration %> </td>
      <td> <a class="btn btn-info btn-xs" tabindex="0" role="button" data-html="true" data-toggle="popover" data-placement="bottom" data-trigger="toggle" title="Message content" data-content="<%= h(cpu_alert.custom_message).gsub(/\n/, '<br/>') %>"> <i class="glyphicon glyphicon-info-sign"> </i> </a> </td>
      <td> <div class="btn-group" role="group" aria-label="Operations">
        <%= link_to cpu_alert, class: 'btn btn-default btn-xs', data: { toggle: 'tooltip', title: 'View' } do %> <i class="glyphicon glyphicon-eye-open"> </i> <% end %>
        <%= link_to edit_cpu_alert_path(cpu_alert), class: 'btn btn-default btn-xs', data: { toggle: 'tooltip', title: 'Edit' } do %> <i class="glyphicon glyphicon-edit"> </i> <% end %>
        <%= link_to cpu_alert, method: :delete, data: { confirm: 'Delete item?', toggle: 'tooltip', title: 'Delete' }, class: 'btn btn-xs btn-danger' do %> <i class="glyphicon glyphicon-remove"> </i> <% end %>
      </div> </td>
    </tr>
    <% end %>
  </tbody>
</table>
</div>

<br>

<%= link_to new_cpu_alert_path, class: 'btn btn-success', remote: true, id:"new_cpu_alert_link" do %>
<i class="glyphicon glyphicon-plus"> </i> New CPU Alert
<% end %>